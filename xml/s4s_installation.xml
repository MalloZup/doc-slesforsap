<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE chapter
[
  <!ENTITY % entities SYSTEM "entity-decl.ent">
    %entities;
]>
<chapter xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" version="5.0" xml:id="s4s.installation">
 <title>Installing Using the Installation Workflow</title>

 <para>
  This is a guided installation of the operating system with optimized
  settings for SAP applications. During the installation workflow, you can
  choose whether you want to install an SAP application during the
  installation workflow. If so, you will be asked to provide SAP installation
  media when the &sls; installation is finished.
 </para>

 <sect1 xml:id="s4s.inst.booting">
  <title>Starting the Installation of the Operating System</title>
  <remark>Section title could be better... - sknorr, 2016-01-11</remark>

  <procedure>
   <step>
    <para>
     Boot from the DVD.
     From the DVD boot menu, select <guimenu>Installation</guimenu>.
     <!-- Too basic? -->
     <!-- To navigate to the entry, use the keys <keycap function="up"/> and
     <keycap function="down"/>.
     To choose the entry, press <keycap function="enter"/>. -->
    </para>

    <figure xml:id="fig.s4s.dvd.bootmenu">
     <title>DVD Boot Menu</title>
     <mediaobject>
      <imageobject role="fo">
       <imagedata fileref="s4s-dvd-boot-menu.png" width="80%" format="PNG"/>
      </imageobject>
      <imageobject role="html">
       <imagedata fileref="s4s-dvd-boot-menu.png" width="80%" format="PNG"/>
      </imageobject>
     </mediaobject>
    </figure>

    <para>
     While the initial operating system is starting, you can view boot messages
     by pressing <keycap function="escape"/>.
     When this process has completed, the graphical installation workflow
     will start.
    </para>
   </step>

   <!-- FIXME: This information may be helpful, but here is the wrong place for
        it. We want a straightforward procedure. -->
   <!-- <variablelist>
    <varlistentry>
     <term>Boot from Hard Disk</term>
     <listitem>
      <para>
       Boot the system that is already installed on the local hard disk.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><guimenu>Installation</guimenu> (see <xref linkend="s4s.inst.inst"/>)</term>
     <listitem>
      <para>
       Start a &slsa; installation workflow which allows you to choose whether to
       prepare for installing SAP applications later or installing an
       SAP application directly after the OS installation.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>Upgrade</term>
     <listitem>
      <para>
       Upgrade the system. For more information, see
       <citetitle>&deploy;, Chapter 17,
        <quote>Upgrading SUSE Linux Enterprise</quote>
       </citetitle>
       (&docaddress;).
       <remark>Better use Chapter 18, Service Pack Migration? or reference the
        entire part? Part III, Updating and Upgrading SUSE Linux Enterprise?
       </remark>
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>Rescue System</term>
     <listitem>
      <para>
       Start a minimal Linux system without a graphical user interface.
       For more information, see
       <citetitle>&admin;, Chapter 37,
        <quote>Common Problems and Their Solutions</quote>
       </citetitle>
       (&docaddress;).
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>Check Installation Media</term>
     <listitem>
      <para>
       Check the data integrity of the installation media.
       For more information, see
       <citetitle>&admin;, Chapter 37,
        <quote>Common Problems and Their Solutions</quote>
       </citetitle>
       (&docaddress;).
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>Memory Test</term>
     <listitem>
      <para>
       Test the system RAM using repeated read and write cycles.
       <remark>Citetitle wanted... - sknorr, 2015-01-07</remark>
      </para>
     </listitem>
    </varlistentry>
   </variablelist> -->

   <step>
    <para>
     Select the default system language under <guimenu>Language</guimenu>.
    </para>
    <figure xml:id="fig.s4s.install.license">
     <title>Language, Keyboard and License Agreement</title>
     <mediaobject>
      <imageobject role="fo">
       <imagedata fileref="s4s-install-license.png" width="80%" format="PNG"/>
      </imageobject>
      <imageobject role="html">
       <imagedata fileref="s4s-install-license.png" width="80%" format="PNG"/>
      </imageobject>
     </mediaobject>
    </figure>
   </step>
   <step>
    <para>
     Select a fitting keyboard layout <guimenu>Keyboard Layout</guimenu>.
     To test whether the selected layout matches your physical keyboard,
     use the text box <guimenu>Keyboard Test</guimenu>.
    </para>
   </step>
   <step>
    <para>
     Read the license agreement. If you agree, select
     <guimenu>I Agree to the License Terms</guimenu>.
     Otherwise, choose <guimenu>Abort</guimenu> which cancels the installation.
     Proceed with <guimenu>Next</guimenu>.
    </para>
   </step>
   <step performance="optional">
    <para>
     If automatic network configuration via DHCP fails, the
     <guimenu>Network Settings</guimenu> will automatically open.
    </para>
    <para>
     If you are already on the screen <guimenu>Registration</guimenu>, your
     network conntection works. To change network settings anyway, click
     <guimenu>Network Configuration</guimenu>.
    </para>
    <para>
     For details regarding network configuration, see
     <citetitle>
      &admin;, Chapter 19 <quote>Basic Networking</quote>,
      Section 19.4 <quote>Configuring a Network Connection with YaST</quote>
     </citetitle> (&docaddress;).
    </para>
    <para>
     Proceed with <guimenu>Next</guimenu>.
    </para>
   </step>
   <step>
    <para>
     On the screen <guimenu>Registration</guimenu>, enter your
     <guimenu>E-Mail Address</guimenu> and <guimenu>Registration Code</guimenu>.
     Successful registration is a prerequisite for receiving product updates and
     being entitled to technical support.
    </para>
    <para>
     Proceed with <guimenu>Next</guimenu>.
    </para>
    <important>
     <title>Register at This Step</title>
     <para>
      Make sure to register your system at this step in the installation.
      Otherwise, you will not receive package updates immediately and your
      finished installation will lack vital packages from the
      &sle; &hasi; repository.
     </para>
    </important>
    <figure xml:id="fig.s4s.install.reg-dialog">
     <title>Registration</title>
     <mediaobject>
      <imageobject role="fo">
       <imagedata fileref="s4s-install-registration.png" width="80%" format="PNG"/>
      </imageobject>
      <imageobject role="html">
       <imagedata fileref="s4s-install-registration.png" width="80%" format="PNG"/>
      </imageobject>
     </mediaobject>
    </figure>
    <note>
     <title>Release Notes</title>
     <para>
      From this point on, the Release Notes can be viewed from any screen during
      the installation process by selecting <guimenu>Release Notes</guimenu>.
     </para>
    </note>
   </step>
   <step>
    <para>
     When asked whether to enable update repositories, choose
     <guimenu>Yes</guimenu>.
    </para>
   </step>
   <step>
    <para>
     On the screen, <guimenu>Extension and Module Selection</guimenu>, you
     can optionally choose additional &slea; extensions and modules.
     The list contains free modules, such as the &sle; SDK and extensions
     requiring a registration key that is liable for costs.
     Proceed with <guimenu>Next</guimenu>.
    </para>
   </step>
   <step>
    <para>
     The following screen allows you to choose the
     <guimenu>Product Installation Mode</guimenu>.
     You can now choose between:
    </para>
    <itemizedlist>
     <listitem>
      <formalpara>
       <title>A &sls; installation</title>
       <para>
        To install a &slsa; system without SAP-specific customizations,
        choose <guimenu>Proceed with standard SLES installation</guimenu>.
        For details, see
        <citetitle>
         &instquick;, Section 1.2 <quote>Installing &sls;</quote>
        </citetitle> (&docaddress;).
       </para>
      </formalpara>
     </listitem>
     <listitem>
      <formalpara>
       <title>A &sles4sap; installation</title>
       <para>
        To install a &slsa; system with SAP-specific customizations,
        choose
        <guimenu>Proceed with standard SLES for SAP Applications
        installation</guimenu>.
       </para>
      </formalpara>
      <itemizedlist>
       <listitem>
        <para>
         To install an SAP Application together with the &slsa;,
         check <guimenu>Start the SAP Installation Wizard right after the OS
         installation</guimenu>.
        </para>
       </listitem>
       <listitem>
        <para>
         To prepare the system for later installation of a SAP Application,
         leave <guimenu>Start the SAP Installation Wizard right after the OS
         installation</guimenu> unchecked.
        </para>
       </listitem>
      </itemizedlist>
     </listitem>
    </itemizedlist>
    <para>
     Proceed with <guimenu>Next</guimenu>.
    </para>
    <figure xml:id="fig.s4s.install.type">
     <title>Installation Type</title>
     <mediaobject>
      <imageobject role="fo">
       <imagedata fileref="s4s-install-installationtype.png" width="80%" format="PNG"/>
      </imageobject>
      <imageobject role="html">
       <imagedata fileref="s4s-install-installationtype.png" width="80%" format="PNG"/>
      </imageobject>
     </mediaobject>
    </figure>
   </step>
  </procedure>
 </sect1>

  <sect1 xml:id="sec.s4s.inst.wizard.prepauto">
   <title>Preparing System for Automated Installation</title>
   <para>
    After analyzing your computer, &yast; allows you to specify options
    for a customized installation.
   </para>
   <sect2 xml:id="sec.s4s.inst.wizard.yast2.user.root">
    <title>Password for the System Administrator &rootuser;</title>
    <para>
     First, &yast; prompts you to enter the system administrator
     password; see <xref linkend="fig.s4s.sap-wizard-admin-password"/>. This
     is the root password for the system.
    </para>
    <figure xml:id="fig.s4s.sap-wizard-admin-password">
     <title>System Administrator Password</title>
     <mediaobject>
      <imageobject role="fo">
       <imagedata fileref="s4s_sap_wizard_admin_password.png" width="80%" format="PNG"/>
      </imageobject>
      <imageobject role="html">
       <imagedata fileref="s4s_sap_wizard_admin_password.png" width="80%" format="PNG"/>
      </imageobject>
     </mediaobject>
    </figure>
    <para>
     &rootuser; is the name of the superuser, or the administrator of the
     system. Unlike regular users (who may or may not have permission to
     access certain areas or execute certain commands on the system),
     &rootuser; has unlimited access to change the system configuration,
     install programs, and set up new hardware. The &rootuser; account
     should only be used for system administration, maintenance, and repair.
     Logging in as &rootuser; for daily work is rather risky: a single
     mistake could lead to irretrievable loss of system files.
    </para>
    <para>
     For verification purposes, the password for &rootuser; must be
     entered twice. Do not forget the &rootuser; password. Once entered,
     this password cannot be retrieved.
    </para>
    <para>
     The &rootuser; password can be changed any time later in the
     installed system. To do so, run &yast; and start <menuchoice>
     <guimenu>Security and Users</guimenu> <guimenu>User and Group
     Management</guimenu> </menuchoice>.
    </para>
    <warning>
     <title>The root User</title>
     <para>
      The &rootuser; user has all the permissions needed to make changes
      to the system. To carry out such tasks, the &rootuser; password is
      required. You cannot carry out any administrative tasks without this
      password.
     </para>
    </warning>
<!--
  <sect2 id="sec.s4s.inst.wizard.yast2.user.root">
   <title>Password for the System Administrator &rootuser;</title><indexterm>
   <primary>&yast;</primary>
   <secondary>root password</secondary></indexterm><indexterm>
   <primary>installation</primary>
   <secondary>root password</secondary></indexterm>
   <para>
    When all packages are installed, the basic installation is finished,
    and the system is rebooted for initial configuration, you will be
    prompted to enter a Password for the System Administrator
    &rootuser;; see <xref linkend="fig.s4s.inst.yast-root-password"/>.
   </para>

   <figure id="fig.s4s.inst.yast-root-password">
    <title>Password for root User</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="yast-root-password.png" width="100%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="yast-root-password.png" width="100%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>

  </sect2>
-->
   </sect2>
   <sect2>
    <title>System Volume Configuration</title>
    <para>
     The next &yast; pop-up dialog lets you fine-tune the volume
     configuration. Here you configure the volume for the system and swap
     space. Suitable values depending on your available hardware are
     pre-selected. This is for the &sle; operating system only. The
     data volume comes later, after selecting the SAP Application.
    </para>
    <figure xml:id="fig.s4s.inst.yast-storage-system">
     <title>System Volume Configuration</title>
     <mediaobject>
      <imageobject role="fo">
       <imagedata fileref="yast-storage-system.png" width="80%" format="PNG"/>
      </imageobject>
      <imageobject role="html">
       <imagedata fileref="yast-storage-system.png" width="80%" format="PNG"/>
      </imageobject>
     </mediaobject>
    </figure>
    <para>
     If there is just one hard disk, keep it as the system volume device and
     set the size of the system volume (and the swap space) in GB in the
     lower field and confirm it; see
     <xref linkend="fig.s4s.inst.yast-storage-system"/>.
    </para>
    <tip>
     <title>Size of the System Volume</title>
     <para>
      Normally, at least 35 GB is required for the system volume. The swap
      space depends on the available main memory (RAM). For more
      information, see <citetitle>SAP Note 1984787</citetitle>
      (<link xlink:href="https://service.sap.com/sap/support/notes/1984787"/>)
     </para>
    </tip>
    <para>
     If there is more than one hard disk, select the right one as the system
     volume device and set the size of the system volume (and the swap
     space) in GB in the lower fields and confirm it. For more information
     about partitioning, see <xref linkend="s4s.part"/>.
    </para>
    <warning>
     <title>Deleting Data</title>
     <para>
      If you confirm the storage volume configuration, all existing data on
      the hard disk will be deleted. If you do not want this to happen, turn
      off the system.
     </para>
    </warning>
   </sect2>
   <sect2 xml:id="sec.s4s.inst.wizard.yast2.conf.manual.hostname">
    <title>Host Name, Domain Name, and IP Address</title><indexterm>
    <primary>&yast;</primary>
    <secondary>host name</secondary></indexterm><indexterm>
    <primary>&yast;</primary>
    <secondary>domain name</secondary></indexterm><indexterm>
    <primary>installation</primary>
    <secondary>host name</secondary></indexterm><indexterm>
    <primary>installation</primary>
    <secondary>domain name</secondary></indexterm>
    <para>
     The next dialog starts with the network configuration; see
     <xref linkend="fig.s4s.inst.yast-network-config"/>.
    </para>
    <figure xml:id="fig.s4s.inst.yast-network-config">
     <title>Host Name, Domain Name, and IP Address</title>
     <mediaobject>
      <imageobject role="fo">
       <imagedata fileref="yast-network-config.png" width="80%" format="PNG"/>
      </imageobject>
      <imageobject role="html">
       <imagedata fileref="yast-network-config.png" width="80%" format="PNG"/>
      </imageobject>
     </mediaobject>
    </figure>
    <tip>
     <title>Querying DHCP Server</title>
     <para>
      The installation wizard will query a locally running DHCP server to
      get interesting network data such as names and IP adresses for the
      local host, DNS server, NTP server, etc. This ensures that the entry
      fields of the next dialogs will be prefilled with these data.
     </para>
    </tip>
    <para>
     The <guimenu>Host name</guimenu> is the computer’s name in the
     network. The <guimenu>Domain Name</guimenu> is the name of the network.
     A host name and domain are proposed by default. If your system is part
     of a network, the host name has to be unique in this network, whereas
     the domain name has to be common to all hosts on the network.
    </para>
    <para>
     Also enter the <guimenu>IP Address</guimenu> and
     <guimenu>Netmask</guimenu> for this host. The IP address must be unique
     and the netmask has to be common to all hosts on the network.
    </para>
   </sect2>
   <sect2 xml:id="sec.s4s.inst.wizard.yast2.conf.manual.dns-ntp">
    <title>Domain Name Service (DNS) and Time Server (NTP)</title>
    <para>
     The next dialog continues with the network configuration; see
     <xref linkend="fig.s4s.inst.yast-network-config2"/>.
    </para>
    <figure xml:id="fig.s4s.inst.yast-network-config2">
     <title>Domain Name Service (DNS) and Time Server (NTP)</title>
     <mediaobject>
      <imageobject role="fo">
       <imagedata fileref="yast-network-config2.png" width="80%" format="PNG"/>
      </imageobject>
      <imageobject role="html">
       <imagedata fileref="yast-network-config2.png" width="80%" format="PNG"/>
      </imageobject>
     </mediaobject>
    </figure>
    <para>
     For Domain Name Service (DNS) configuration, enter the <guimenu>Domain
     Searchlist</guimenu> and the <guimenu>IP Address of DNS
     Server</guimenu> plus the IP address of the <guimenu>Default
     Gateway</guimenu> of your network.
    </para>
    <para>
     Also enter the address of the <guimenu>NTP Server</guimenu> to
     synchronize automatically via Network Time Protocol (NTP).
    </para>
   </sect2>
   <sect2 xml:id="sec.s4s.inst.wizard.yast2.conf.manual.reg">
    <title>Registration</title>
<!-- 215-yast-registration.png -->
    <para>
     To get technical support and product updates, you need to register and
     activate your product with the &scc;; see
     <xref linkend="fig.s4s.inst.yast-reg"/>. This dialog provides
     assistance for doing so. For information about &scc;, see
     <link xlink:href="https://scc.suse.com"/>.
    </para>
    <figure xml:id="fig.s4s.inst.yast-reg">
     <title>Registration</title>
     <mediaobject>
      <imageobject role="fo">
       <imagedata fileref="yast-registration.png" width="80%" format="PNG"/>
      </imageobject>
      <imageobject role="html">
       <imagedata fileref="yast-registration.png" width="80%" format="PNG"/>
      </imageobject>
     </mediaobject>
    </figure>
    <para>
     Enter your <guimenu>E-Mail Address</guimenu> and <guimenu>Registration
     Code</guimenu> for the product. If you provide the registration code
     now, operating system updates will be installed automatically during
     the installation of the system.
    </para>
<!-- 2015-05-04, ke: Packages Pre-Selected noticed by peters -->
<!--                 also see above                          -->
    <note>
     <title>Additional Packages Pre-Selected</title>
     <para>
      If you install with registration, the &sle; &hasi; repository by
      default will be activated and some few &sle; &hasi; packages
      will get installed. This will not happen, if you will register the
      product after the installation.
     </para>
    </note>
    <para>
     After confirmation, the system will be configured with the supplied
     settings. Then &yast; performs the partitioning and the software
     installation. Packages are installed one by one, so you can see the
     progress.
    </para>
    <para>
     No user action is required at this stage.
    </para>
    <warning>
     <title>Firewall Disabled</title>
     <para>
      This wizard-based installation scenario disables the firewall
      (SuSEfirewall2) completely.
     </para>
     <para>
      If needed, you can activate the firewall after the installation. If
      you activate the firewall after the installation, you must open all
      required ports manually. For more information about required ports,
      see <xref linkend="s4s.config.ports"/>.
     </para>
    </warning>
   </sect2>
  </sect1>

  <xi:include href="s4s_installation_sap.xml" parse="xml"/>

 <sect1 xml:id="s4s.inst.profile">
  <title><guimenu>SLES for SAP Applications &mdash; Installation with External Profile</guimenu></title>

  <para>
   This installation is driven by a user-provided &ay; profile and there
   is no wizard support. This scenario is suitable for experienced users who
   are familiar with &ay; and want to deploy their own &ay; profiles
   to install &sles4sap;. For more information about &ay; profiles,
   see the SLES <emphasis>&ay; Guide</emphasis> (&docaddress;).
  </para>

  <para>
   In order to use a user-provided &ay; profile, select <quote>Install
   SLES for SAP Applications &mdash; Installation with External
   Profile</quote> from the DVD Boot Menu. Within the boot options, change
   the <literal>autoyast=usb:///</literal> parameter to the location of a
   user-provided &ay; profile, or enter the location when &yast; asks
   for it in the next dialog.
  </para>

  <figure xml:id="fig.s4s.profile.autoinst">
   <title>&yast; Asking for System Profile Location</title>
   <mediaobject>
    <imageobject role="fo">
     <imagedata fileref="s4s_profile_autoinst.png" width="100%" format="PNG"/>
    </imageobject>
    <imageobject role="html">
     <imagedata fileref="s4s_profile_autoinst.png" width="100%" format="PNG"/>
    </imageobject>
   </mediaobject>
  </figure>

  <note>
   <title>Loading External Profile via HTTP</title>
   <para>
    It is possible to load the external profile from the network via HTTP.
    In this case, it is also needed to change the
    <literal>netsetup</literal> boot parameter from <literal>0</literal>
    (default) to <literal>1</literal>:
   </para>
<screen><![CDATA[... autoyast=http://&wwwip;/autoinst.xml netsetup=1 ...]]></screen>
  </note>

<!-- commenting for the moment...
    <para>
     &ay; will look on USB devices for the XML configuration file
     (external profile). Plug in an USB device and store your config in
     a way like it is on the DVD in the
     <filename>/sap-apl/rules</filename> directory.
    </para>
    -->

  <para>
   <remark>2015-03-12, ke: CHECKIT!</remark>
   You can also reference the SAP-specific pattern, the HA component and
   SAP-specific IBM Java in your &ay; profile and then install it during
   this installation scenario. As everything else, these components are
   <emphasis>not</emphasis> preselected and you must include this yourself
   in your <filename>autoyast.xml</filename> file.
  </para>

  <sect2>
   <title>About &ay;</title>
   <para>
    &ay; is a system for installing one or more &sle; systems
    automatically and without user intervention. &ay; installations are
    performed using an &ay; profile with installation and configuration
    data. That profile can be created using the &ay; configuration
    interface and can be provided to &yast; during installation in
    different ways.
   </para>
   <para>
    For more information about &ay;, see the <emphasis>&sls; &productnumber;
    &ay; Guide</emphasis> (&docaddress;).
   </para>
  </sect2>

  <sect2>
   <title>Partitioning with &ay;</title>
   <para>
    For standard systems find pre-defined partitioning settings in
    <filename>/usr/share/YaST2/include/sap-installation-wizard/</filename>.
    These could serve as examples if you want to create your custom
    partitioning scripts.
   </para>
   <para>
    For background information on partitioning, see
    <xref linkend="s4s.part"/>.
   </para>
  </sect2>
 </sect1>
</chapter>
