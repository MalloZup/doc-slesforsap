<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE chapter
[
  <!ENTITY % entities SYSTEM "entity-decl.ent">
    %entities;
]>
<sect1 xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" version="5.0" xml:id="sec.s4s.component">
 <title>Software Components of &sles4sap;</title>

 <para>
  &sles4sapreg; consists of several components such as &sleha;,
  the Kernel page-cache limit feature, and an Installation
  Wizard, which are briefly explained in the following sections.
 </para>

 <variablelist>
  <varlistentry>
   <term><emphasis>&sls;</emphasis>
   </term>
   <listitem>
    <para>
     The current release is based on &sls; &productnumber;. &sls;
     is the most interoperable platform for mission-critical computing,
     both physical and virtual.
    </para>
   </listitem>
  </varlistentry>
  <varlistentry>
   <term><emphasis>Installation Workflow</emphasis>
   </term>
   <listitem>
    <para>
     The Installation Workflow offers a guided installation path for both the
     &sls; operating system and the SAP application.
     <!-- jweber does not want plural ("applications") here.-->
    </para>
    <para>
     Additionally, the workflow can be extended by third-party vendors or
     customers using &supmedia;. For more information, see
     <xref linkend="app.s4s.component.supplement"/>.
    </para>
   </listitem>
  </varlistentry>
  <varlistentry>
   <term><emphasis>&sleha;</emphasis>
   </term>
   <listitem>
    <para>
     This component consists of:
    </para>
<!--
        2015-05-04: https://www.suse.com/products/highavailability/features/
    -->
    <itemizedlist mark="bullet" spacing="normal">
     <listitem>
      <para>
       Flexible, policy-driven clustering
      </para>
     </listitem>
     <listitem>
      <para>
       Cluster-aware file system and volume management
      </para>
     </listitem>
     <listitem>
      <para>
       Continuous data replication
      </para>
     </listitem>
     <listitem>
      <para>
       Setup and installation
      </para>
     </listitem>
     <listitem>
      <para>
       Management and administration tools
      </para>
     </listitem>
     <listitem>
      <para>
       Resource agents, also for SAP
      </para>
     </listitem>
     <listitem>
      <para>
       Virtualization-aware
      </para>
     </listitem>
    </itemizedlist>
    <para>
     For more information about &sleha;, see the &haguide;
     (<link xlink:href="http://www.suse.com/documentation/sle-ha-12/"/>)
     and the <emphasis>White Papers</emphasis> and <emphasis>Best Practice
     Guides</emphasis> in the Resource Library
     (<link xlink:href="http://www.suse.com/products/sles-for-sap/resource-library/"/>).
    </para>
   </listitem>
  </varlistentry>
  <varlistentry>
   <term><emphasis>Page-Cache Limit</emphasis>
   </term>
   <listitem>
    <para>
     Limit the kernel file system cache size to influence swapping
     behavior. With this feature you can gain better performance by
     allocating memory to an application. For more information, see
     <xref linkend="sec.s4s.configure.page-cache"/>.
    </para>
   </listitem>
  </varlistentry>
  <varlistentry>
   <term><emphasis>ClamSAP</emphasis>
   </term>
   <listitem>
    <para>
     ClamSAP is an antivirus toolkit integration. For more information, see
     <xref linkend="sec.s4s.component.clamsap"/>.
    </para>
   </listitem>
  </varlistentry>
 </variablelist>


 <sect2 xml:id="sec.s4s.hana-replicate">
  <title>Resource Agents for &hana; System Replication</title>

  <para>
   &sles4sap; supports &hana; System Replication using components of &sleha;
   and two additional resource agents (RA).
  </para>

  <sect3 xml:id="sec.s4s.hana-ra">
   <title><systemitem>SAPHana</systemitem> Resource Agent</title>
   <!--
    Terms:
    + scale-up: adding more resources to an existing system
    + scale-out: adding complementary systems to your existing ones

    Replication is orthogonal to either of these: It is possible with either
    scale-up or scale-out scenarios. (It is just that SLES does not support
    scale-out at the moment.)

    Fixme/12 SP2: Are scale-out scenarios supported? FATE#318793
    - sknorr, 2016-02-04
   -->
   <!--
    Feedback from Fabian Herschel regarding the word "failover":
    "[W]e should be careful about terms like "failover" or "takeover". Because
    in the SAP HANA ecosystem, the terms are all used twice but differently
    than we do. As normally only SAP HANA users will be interested in details
    about the RAs, I suggest to follow the SAP wording to avoid confusion."
    => Use "takeover".
   -->
   <para>
    This resource agent from SUSE supports scale-up scenarios by checking the
    &hana; database instances for whether a takeover needs to happen.
    Unlike with the pure SAP solution, takeovers can be automated.
   </para>
   <para>
    It is configured as a master/slave resource: The master assumes
    responsibility for the &hana; databases running in primary mode,
    whereas the slave is responsible for instances
    that are operated in synchronous (secondary) status. In case of takeover,
    the secondary (slave resource instance) can automatically be promoted to
    become the new primary (master resource instance).
   </para>

   <para>
    This resource agent supports system replication for the following in
    scale-up scenarios:
   </para>
   <itemizedlist>
    <listitem>
     <formalpara>
      <title>Performance-Optimized Scenario</title>
      <para>
       Two systems (A and B) within the same &sleha; cluster, one primary (A)
       and one secondary (B). The primary system (A) is
       replicated synchronously to the secondary system (B).
      </para>
     </formalpara>
    </listitem>
    <listitem>
     <formalpara>
      <title>Cost-Optimized Scenario</title>
      <para>
       The basic setup of A and B is the same as in the
       <emphasis>Performance-Optimized Scenario</emphasis>.
       However, the secondary system (B) is also used for non-productive
       purposes, such as for a development or QA database. If a takeover occurs,
       the system resources for the productive database are increased via a
       SAP hook call-out script. The non-productive system will be stopped
       before the takeover is being processed.
      </para>
     </formalpara>
    </listitem>
    <listitem>
     <formalpara>
      <title>Chain/Multi-Tier Scenario</title>
      <para>
       Three systems (A, B, and C), of which two are located within the
       same &sleha; cluster (A and B). The third system (C) is located
       externally. The primary system (A) is replicated synchronously to the
       secondary system (B). The secondary system (B) is
       replicated asynchronously to the external system (C).
      </para>
     </formalpara>
     <para>
      If a takeover from A to B occurs, the connection between B and C remains
      untouched. However, B is not allowed to be the source for two systems
      (A and C), as this would be a <quote>star</quote> topology which
      is not supported with current &hana; versions (such as SPS11).
     </para>
     <para>
      Using &hana; commands, you can then manually decide what to do:
     </para>
     <itemizedlist>
      <listitem>
       <para>
        The connection between B and C can be broken, so that B can
        connect to A.
       </para>
      </listitem>
      <listitem>
       <para>
        If replication to the external system site is more important than
        local system replication, the connection between B and C can be kept.
       </para>
      </listitem>
     </itemizedlist>
    </listitem>
   </itemizedlist>
    <para>
     For all of the scenarios, &sles4sap; supports both single-tenant and
     multi-tenant &hana; databases. That is, you can use &hana; databases that
     serve multiple SAP applications.
    </para>
  </sect3>
  <sect3 xml:id="sec.s4s.topology-ra">
   <title><systemitem>SAPHanaTopology</systemitem> Resource Agent</title>
   <para>
    To make configuring the cluster as simple as possible, SUSE has
    developed the <systemitem>SAPHanaTopology</systemitem> resource agent.
    This agent runs on all
    nodes of a &sleha; cluster and gathers information about the status and
    configurations of &hana; system replications. It is designed as a
    normal (stateless) clone.
   </para>
  </sect3>
  <sect3 xml:id="sec.s4s.hana-replicate.more">
   <title>For More Information</title>
   <para>
    For more information, see:
   </para>
   <itemizedlist mark="bullet" spacing="normal">
    <listitem>
     <para>
      The &haguide; at &docaddress;.
     </para>
    </listitem>
    <listitem>
     <para>
      The <emphasis>White Papers</emphasis> and <emphasis>Best Practice
      Guides</emphasis> in the Resource Library at
      <link xlink:href="https://www.suse.com/products/sles-for-sap/resource-library/"/>.
      For example,
      <link xlink:href="https://www.suse.com/promo/sap/hana/replication.html"/>.
     </para>
    </listitem>
   </itemizedlist>
  </sect3>
 </sect2>

 <sect2 xml:id="sec.s4s.component.clamsap">
  <title>ClamSAP</title>
  <para>
   ClamSAP integrates the ClamAV antivirus toolkit into &netweaver; applications
   and helps improve cross-platform threat detection.
   For example, you can use it to allow an SAP application to scan for
   malicious uploads in HTTP uploads.
   ClamSAP can be installed from the package <systemitem>clamsap</systemitem>.
  </para>
  <para>
   ClamSAP is a shared library that links between ClamAV and the
   &netweaver; Virus Scan Interface (NW-VSI) by SAP. The version of ClamSAP
   shipped with &productname; &productnumber; supports NW-VSI version 2.0.
  </para>
  <para>
   To use virus scanning within &netweaver;, you have to enable it there.
   <!-- To do so, choose <menuchoice><guimenu>Transactions</guimenu>
   <guimenu>VSCAN</guimenu></menuchoice>. -->
  </para>
  <remark>
   Commented away part about enabling ClamSAP from NW menu, because I have not
   seen this in the flesh. FIXME - sknorr, 2016-02-10
  </remark>
 </sect2>
</sect1>
